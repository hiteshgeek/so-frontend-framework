<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profit & Loss - Developer Documentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../../common/sixorbit-common.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        body{margin:0;padding:0;background:var(--so-grey-50);font-family:var(--so-font-family)}.doc-container{max-width:1200px;margin:0 auto;padding:var(--so-space-3xl) var(--so-space-xl)}.doc-header{background:linear-gradient(135deg,#9334e6 0%,#7c28c2 100%);color:white;padding:var(--so-space-4xl) var(--so-space-3xl);border-radius:var(--so-radius-lg);margin-bottom:var(--so-space-3xl);box-shadow:var(--so-shadow-2)}.doc-header h1{margin:0 0 var(--so-space-md) 0;font-size:36px;font-weight:500}.doc-header p{margin:0;font-size:18px;opacity:.95}.back-btn{display:inline-flex;align-items:center;gap:var(--so-space-sm);padding:var(--so-space-sm) var(--so-space-lg);background:rgba(255,255,255,.2);color:white;text-decoration:none;border-radius:var(--so-radius-sm);margin-bottom:var(--so-space-lg);transition:all var(--so-transition-base)}.back-btn:hover{background:rgba(255,255,255,.3)}.doc-section{background:white;padding:var(--so-space-3xl);border-radius:var(--so-radius-lg);margin-bottom:var(--so-space-2xl);box-shadow:var(--so-shadow-1)}.doc-section h2{font-size:28px;font-weight:500;color:var(--so-grey-900);margin:0 0 var(--so-space-lg) 0;padding-bottom:var(--so-space-md);border-bottom:2px solid var(--so-grey-200)}.doc-section h3{font-size:20px;font-weight:500;color:var(--so-grey-900);margin:var(--so-space-2xl) 0 var(--so-space-md) 0}.doc-section p{font-size:15px;line-height:1.7;color:var(--so-grey-700);margin-bottom:var(--so-space-lg)}.doc-section ul,.doc-section ol{font-size:15px;line-height:1.7;color:var(--so-grey-700);margin-bottom:var(--so-space-lg)}.doc-section li{margin-bottom:var(--so-space-sm)}.code-block{position:relative;margin:var(--so-space-lg) 0;border-radius:var(--so-radius-md);overflow:hidden;box-shadow:var(--so-shadow-1)}.code-header{background:#2d3748;color:white;padding:var(--so-space-md) var(--so-space-lg);display:flex;justify-content:space-between;align-items:center;font-size:13px;font-weight:500}.code-language{display:flex;align-items:center;gap:var(--so-space-sm)}.copy-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:white;padding:4px 12px;border-radius:var(--so-radius-sm);font-size:12px;cursor:pointer;display:flex;align-items:center;gap:4px;transition:all var(--so-transition-base)}.copy-btn:hover{background:rgba(255,255,255,.2)}.copy-btn.copied{background:#34a853;border-color:#34a853}.copy-btn .material-icons{font-size:16px}pre{margin:0;padding:var(--so-space-xl);background:#1e293b!important;overflow-x:auto}code{font-family:'Roboto Mono',monospace;font-size:13px;line-height:1.6}.inline-code{background:var(--so-grey-100);padding:2px 6px;border-radius:var(--so-radius-sm);font-family:'Roboto Mono',monospace;font-size:13px;color:#e74c3c}.info-box{background:var(--so-info-light);border-left:4px solid var(--so-info);padding:var(--so-space-lg);border-radius:var(--so-radius-sm);margin:var(--so-space-lg) 0}.param-table{width:100%;border-collapse:collapse;margin:var(--so-space-lg) 0;font-size:14px}.param-table th{background:var(--so-grey-100);padding:var(--so-space-md);text-align:left;font-weight:500;border-bottom:2px solid var(--so-grey-300)}.param-table td{padding:var(--so-space-md);border-bottom:1px solid var(--so-grey-200)}.param-table tr:last-child td{border-bottom:none}
    </style>
</head>
<body>
    <div class="doc-container">
        <div class="doc-header">
            <a href="../../index.html" class="back-btn">
                <span class="material-icons">arrow_back</span>
                Back to Main Menu
            </a>
            <h1>Profit & Loss Plugin</h1>
            <p>Developer Documentation - Version 1.0.0</p>
        </div>

        <div class="doc-section">
            <h2>Overview</h2>
            <p>The Profit & Loss plugin displays a comprehensive financial statement with outlet or monthly views, showing trade expenses/income, indirect expenses/income, gross profit, and net profit with visual charts.</p>
        </div>

        <div class="doc-section">
            <h2>Features</h2>
            <ul>
                <li>Monthly or Outlet-based view with frozen first column</li>
                <li>Trade Expenses breakdown (Opening Stock, Direct Expenses, Purchases)</li>
                <li>Trade Income breakdown (Sales, Direct Income, Closing Stock)</li>
                <li>Gross Profit calculation with percentage</li>
                <li>Indirect Expenses (Personnel, Administrative, Selling)</li>
                <li>Indirect Income (Other Income)</li>
                <li>Net Profit calculation with percentage</li>
                <li>Interactive stacked bar and line charts using ECharts</li>
                <li>Clickable groups with callbacks</li>
                <li>Google Sans typography and Material Design icons</li>
                <li>Responsive design for all screen sizes</li>
            </ul>
        </div>

        <div class="doc-section">
            <h2>Installation</h2>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language"><span class="material-icons">code</span>HTML</span>
                    <button class="copy-btn" onclick="copyCode(this)"><span class="material-icons">content_copy</span>Copy</button>
                </div>
                <pre><code class="language-html">&lt;!-- Google Fonts & Icons --&gt;
&lt;link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;700&display=swap" rel="stylesheet"&gt;
&lt;link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"&gt;

&lt;!-- Common & Plugin Styles --&gt;
&lt;link rel="stylesheet" href="../../common/sixorbit-common.css"&gt;
&lt;link rel="stylesheet" href="monthwise-profit-loss.css"&gt;

&lt;!-- ECharts Library --&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"&gt;&lt;/script&gt;

&lt;!-- Plugin JavaScript --&gt;
&lt;script src="monthwise-profit-loss.js"&gt;&lt;/script&gt;</code></pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>Basic Usage</h2>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language"><span class="material-icons">code</span>JavaScript</span>
                    <button class="copy-btn" onclick="copyCode(this)"><span class="material-icons">content_copy</span>Copy</button>
                </div>
                <pre><code class="language-javascript">const profitLoss = new ProfitLoss('container-id', {
    data: profitLossData,
    onGroupClick: function(groupData) {
        console.log('Group clicked:', groupData);
        // Open detailed group analysis
    }
});</code></pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>Configuration Options</h2>
            <table class="param-table">
                <thead>
                    <tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr>
                </thead>
                <tbody>
                    <tr><td><code class="inline-code">data</code></td><td>Object</td><td><code class="inline-code">null</code></td><td>Profit & loss data object</td></tr>
                    <tr><td><code class="inline-code">onGroupClick</code></td><td>Function</td><td><code class="inline-code">null</code></td><td>Callback when a group is clicked</td></tr>
                </tbody>
            </table>
        </div>

        <div class="doc-section">
            <h2>Data Format</h2>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language"><span class="material-icons">code</span>JSON</span>
                    <button class="copy-btn" onclick="copyCode(this)"><span class="material-icons">content_copy</span>Copy</button>
                </div>
                <pre><code class="language-json">{
    "company": "Company Name",
    "period": {
        "start": "2025-04-01",
        "end": "2026-03-31"
    },
    "viewType": "monthly",
    "profitLoss": [
        {
            "id": "apr_2025",
            "name": "Apr 2025",
            "tradeExpenses": {
                "openingStock": { "value": 0, "groups": [] },
                "directExpenses": { "value": 0, "groups": [] },
                "purchases": { "value": 0, "groups": [] },
                "total": 0
            },
            "tradeIncome": {
                "sales": { "value": 71706846.46, "groups": [...] },
                "directIncome": { "value": 0, "groups": [] },
                "closingStock": { "value": 71706846.46, "groups": [] },
                "total": 71706846.46
            },
            "grossProfit": 40916892.47,
            "grossProfitPercent": 57.06,
            "indirectExpenses": {
                "personnel": { "value": 12000000, "groups": [...] },
                "administrative": { "value": 10789539.99, "groups": [...] },
                "selling": { "value": 8000000, "groups": [...] },
                "total": 30789539.99
            },
            "indirectIncome": {
                "otherIncome": { "value": 0, "groups": [] },
                "total": 0
            },
            "netProfit": 40917304.47,
            "netProfitPercent": 57.06
        }
    ]
}</code></pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>Table Structure</h2>
            <p>The P&L table is organized with the following column groups:</p>
            <ol>
                <li><strong>First Column (Frozen)</strong>: Month or Outlet name - stays visible when scrolling horizontally</li>
                <li><strong>Trade Expenses</strong>: Opening Stock, Direct Expenses, Purchases, and Total</li>
                <li><strong>Trade Income</strong>: Sales, Direct Income, Closing Stock, and Total</li>
                <li><strong>Gross Profit</strong>: Amount and Percentage (colored green for profit, red for loss)</li>
                <li><strong>Indirect Expenses</strong>: Personnel, Administrative, Selling, Other, and Total</li>
                <li><strong>Indirect Income</strong>: Other Income and Total</li>
                <li><strong>Net Profit</strong>: Amount and Percentage (colored green for profit, red for loss)</li>
            </ol>
        </div>

        <div class="doc-section">
            <h2>API Methods</h2>

            <h3>loadData(data)</h3>
            <p>Load new profit & loss data into the plugin.</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language"><span class="material-icons">code</span>JavaScript</span>
                    <button class="copy-btn" onclick="copyCode(this)"><span class="material-icons">content_copy</span>Copy</button>
                </div>
                <pre><code class="language-javascript">profitLoss.loadData(newData);</code></pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>Charts</h2>
            <p>The plugin includes interactive charts powered by ECharts showing:</p>
            <ul>
                <li><strong>Trade Income</strong> - Green stacked bars</li>
                <li><strong>Trade Expenses</strong> - Red stacked bars</li>
                <li><strong>Indirect Expenses</strong> - Yellow stacked bars</li>
                <li><strong>Gross Profit</strong> - Blue line chart</li>
                <li><strong>Net Profit</strong> - Purple line chart</li>
            </ul>
            <p>Charts automatically resize with the window and show tooltips with formatted currency values on hover.</p>
        </div>

        <div class="doc-section">
            <h2>Events and Callbacks</h2>

            <h3>onGroupClick(groupData)</h3>
            <p>Called when any clickable group cell is clicked. All group cells in the table are clickable.</p>
            <div class="code-block">
                <div class="code-header">
                    <span class="code-language"><span class="material-icons">code</span>JavaScript</span>
                    <button class="copy-btn" onclick="copyCode(this)"><span class="material-icons">content_copy</span>Copy</button>
                </div>
                <pre><code class="language-javascript">onGroupClick: function(groupData) {
    console.log('Row ID:', groupData.rowId);
    console.log('Group Name:', groupData.groupName);
    console.log('Column Type:', groupData.columnType);
    // Open detailed breakdown, navigate to reports, etc.
}</code></pre>
            </div>
        </div>

        <div class="doc-section">
            <h2>Styling</h2>
            <p>The plugin uses consistent styling with:</p>
            <ul>
                <li>Google Sans font family for modern typography</li>
                <li>Frozen first column that stays visible during horizontal scrolling</li>
                <li>Color-coded profit (green) and loss (red) values</li>
                <li>Clickable cells highlighted in blue with hover effects</li>
                <li>Total columns with distinct background for easy identification</li>
                <li>Responsive design that adapts to mobile screens</li>
            </ul>
        </div>

        <div class="doc-section">
            <h2>Browser Support</h2>
            <ul>
                <li>Chrome (latest)</li>
                <li>Firefox (latest)</li>
                <li>Safari (latest)</li>
                <li>Edge (latest)</li>
                <li>Mobile browsers (iOS Safari, Chrome Mobile)</li>
            </ul>
        </div>

        <div class="doc-section">
            <h2>Example</h2>
            <p>See <a href="index.html"><code class="inline-code">index.html</code></a> for a complete working example with sample monthly data.</p>
        </div>
    </div>

    <script>
        hljs.highlightAll();
        function copyCode(button) {
            const code = button.closest('.code-block').querySelector('code').textContent;
            navigator.clipboard.writeText(code).then(function() {
                button.classList.add('copied');
                button.innerHTML = '<span class="material-icons">check</span>Copied!';
                setTimeout(function() {
                    button.classList.remove('copied');
                    button.innerHTML = '<span class="material-icons">content_copy</span>Copy';
                }, 2000);
            });
        }
    </script>
</body>
</html>
