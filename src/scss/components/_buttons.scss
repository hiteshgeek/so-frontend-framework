// ============================================
// SIXORBIT UI - BUTTONS
// Button component styles
// ============================================

@use '../abstracts' as *;

// ============================================
// BASE BUTTON
// ============================================

.#{$so-prefix}btn {
  @include button-base;
  @include ripple-effect(rgba(255, 255, 255, 0.3));

  // Icon inside button
  .material-icons {
    font-size: 18px;
  }
}

// ============================================
// BUTTON SIZES
// ============================================

.#{$so-prefix}btn-xs {
  height: 26px;
  padding: 0 spacing('2');
  font-size: 11px;

  .material-icons {
    font-size: 14px;
  }
}

.#{$so-prefix}btn-sm {
  @include button-size($so-form-height-sm, spacing('3'), $so-form-font-size-sm);

  .material-icons {
    font-size: 16px;
  }
}

.#{$so-prefix}btn-lg {
  @include button-size($so-form-height-lg, spacing('6'), $so-form-font-size-lg);

  .material-icons {
    font-size: 20px;
  }
}

// ============================================
// ICON-ONLY BUTTON
// ============================================

.#{$so-prefix}btn-icon {
  width: $so-form-height-md;
  padding: 0;

  &.#{$so-prefix}btn-xs {
    width: 26px;
  }

  &.#{$so-prefix}btn-sm {
    width: $so-form-height-sm;
  }

  &.#{$so-prefix}btn-lg {
    width: $so-form-height-lg;
  }
}

// ============================================
// BUTTON VARIANTS
// ============================================

// Primary Button
.#{$so-prefix}btn-primary {
  background: css-var('accent-primary');
  color: $so-white;
  border-color: css-var('accent-primary');

  &:hover:not(:disabled) {
    background: css-var('accent-primary-hover', $so-primary-hover);
    border-color: css-var('accent-primary-hover', $so-primary-hover);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-primary, 0.2);
  }

  @include dark-mode {
    &:focus {
      box-shadow: 0 0 0 3px alpha($so-purple, 0.3);
    }
  }
}

// Secondary Button (Solid Gray)
.#{$so-prefix}btn-secondary {
  background: $so-secondary;
  color: $so-white;
  border-color: $so-secondary;

  &:hover:not(:disabled) {
    background: $so-secondary-hover;
    border-color: $so-secondary-hover;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-secondary, 0.2);
  }
}

// Default Button (when no variant class is specified)
.#{$so-prefix}btn:not([class*="#{$so-prefix}btn-primary"]):not([class*="#{$so-prefix}btn-secondary"]):not([class*="#{$so-prefix}btn-success"]):not([class*="#{$so-prefix}btn-danger"]):not([class*="#{$so-prefix}btn-warning"]):not([class*="#{$so-prefix}btn-info"]):not([class*="#{$so-prefix}btn-outline"]):not([class*="#{$so-prefix}btn-ghost"]):not([class*="#{$so-prefix}btn-link"]):not([class*="#{$so-prefix}btn-light"]):not([class*="#{$so-prefix}btn-dark"]) {
  background: css-var('card-bg');
  color: css-var('text-secondary');
  border-color: css-var('border-color');

  &:hover:not(:disabled) {
    background: css-var('card-hover-bg');
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-grey-500, 0.2);
  }

  &::after {
    background: rgba(0, 0, 0, 0.1);
  }
}

// Success Button
.#{$so-prefix}btn-success {
  background: css-var('accent-success');
  color: $so-white;
  border-color: css-var('accent-success');

  &:hover:not(:disabled) {
    background: css-var('accent-success-hover', $so-success-hover);
    border-color: css-var('accent-success-hover', $so-success-hover);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-success, 0.2);
  }
}

// Danger Button
.#{$so-prefix}btn-danger {
  background: css-var('accent-danger');
  color: $so-white;
  border-color: css-var('accent-danger');

  &:hover:not(:disabled) {
    background: css-var('accent-danger-hover', $so-danger-hover);
    border-color: css-var('accent-danger-hover', $so-danger-hover);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-danger, 0.2);
  }
}

// Warning Button
.#{$so-prefix}btn-warning {
  background: css-var('accent-warning');
  color: $so-grey-900;
  border-color: css-var('accent-warning');

  &:hover:not(:disabled) {
    background: css-var('accent-warning-hover', $so-warning-hover);
    border-color: css-var('accent-warning-hover', $so-warning-hover);
  }

  &::after {
    background: rgba(0, 0, 0, 0.15);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-warning, 0.2);
  }
}

// Info Button
.#{$so-prefix}btn-info {
  background: css-var('accent-info');
  color: $so-white;
  border-color: css-var('accent-info');

  &:hover:not(:disabled) {
    background: css-var('accent-info-hover', $so-info-hover);
    border-color: css-var('accent-info-hover', $so-info-hover);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-info, 0.2);
  }
}

// Ghost Button (Transparent Background)
.#{$so-prefix}btn-ghost {
  background: transparent;
  color: css-var('text-secondary');
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('card-hover-bg');
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-grey-500, 0.15);
  }

  &::after {
    background: rgba(0, 0, 0, 0.1);
  }

  // Ghost with color variants
  &.#{$so-prefix}btn-primary {
    color: css-var('accent-primary');
    background: transparent;
    border-color: transparent;

    &:hover:not(:disabled) {
      background: css-var('accent-primary-light', $so-primary-light);
    }
  }

  &.#{$so-prefix}btn-danger {
    color: css-var('accent-danger');
    background: transparent;
    border-color: transparent;

    &:hover:not(:disabled) {
      background: css-var('accent-danger-light', $so-danger-light);
    }
  }

  &.#{$so-prefix}btn-success {
    color: css-var('accent-success');
    background: transparent;
    border-color: transparent;

    &:hover:not(:disabled) {
      background: css-var('accent-success-light', $so-success-light);
    }
  }

  &.#{$so-prefix}btn-info {
    color: css-var('accent-info');
    background: transparent;
    border-color: transparent;

    &:hover:not(:disabled) {
      background: css-var('accent-info-light', $so-info-light);
    }
  }
}

// Link Button
.#{$so-prefix}btn-link {
  background: transparent;
  color: css-var('accent-primary');
  border-color: transparent;
  padding: 0;
  height: auto;

  &:hover:not(:disabled) {
    text-decoration: underline;
    background: transparent;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-primary, 0.2);
  }

  &::after {
    display: none;
  }
}

// ============================================
// OUTLINE BUTTONS
// ============================================

// Base Outline Button
.#{$so-prefix}btn-outline {
  background: transparent;
  color: css-var('text-secondary');
  border-color: css-var('border-color');

  &:hover:not(:disabled) {
    background: css-var('card-hover-bg');
    border-color: css-var('border-dark', $so-grey-300);
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-grey-500, 0.2);
  }

  &::after {
    background: rgba(0, 0, 0, 0.1);
  }
}

// Outline Primary
.#{$so-prefix}btn-outline-primary {
  background: transparent;
  color: css-var('accent-primary');
  border-color: css-var('accent-primary');

  &:hover:not(:disabled) {
    background: css-var('accent-primary');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-primary, 0.2);
  }
}

// Outline Success
.#{$so-prefix}btn-outline-success {
  background: transparent;
  color: css-var('accent-success');
  border-color: css-var('accent-success');

  &:hover:not(:disabled) {
    background: css-var('accent-success');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-success, 0.2);
  }
}

// Outline Danger
.#{$so-prefix}btn-outline-danger {
  background: transparent;
  color: css-var('accent-danger');
  border-color: css-var('accent-danger');

  &:hover:not(:disabled) {
    background: css-var('accent-danger');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-danger, 0.2);
  }
}

// Outline Warning
.#{$so-prefix}btn-outline-warning {
  background: transparent;
  color: css-var('accent-warning');
  border-color: css-var('accent-warning');

  &:hover:not(:disabled) {
    background: css-var('accent-warning');
    color: $so-grey-900;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-warning, 0.2);
  }
}

// Outline Info
.#{$so-prefix}btn-outline-info {
  background: transparent;
  color: css-var('accent-info');
  border-color: css-var('accent-info');

  &:hover:not(:disabled) {
    background: css-var('accent-info');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-info, 0.2);
  }
}

// ============================================
// LIGHT BUTTONS (Soft Background)
// ============================================

// Light Primary
.#{$so-prefix}btn-light-primary {
  background: css-var('accent-primary-light', $so-primary-light);
  color: css-var('accent-primary');
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('accent-primary');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-primary, 0.2);
  }
}

// Light Success
.#{$so-prefix}btn-light-success {
  background: css-var('accent-success-light', $so-success-light);
  color: css-var('accent-success');
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('accent-success');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-success, 0.2);
  }
}

// Light Danger
.#{$so-prefix}btn-light-danger {
  background: css-var('accent-danger-light', $so-danger-light);
  color: css-var('accent-danger');
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('accent-danger');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-danger, 0.2);
  }
}

// Light Warning
.#{$so-prefix}btn-light-warning {
  background: css-var('accent-warning-light', $so-warning-light);
  color: css-var('accent-warning-hover', $so-warning-dark);
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('accent-warning');
    color: $so-grey-900;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-warning, 0.2);
  }
}

// Light Info
.#{$so-prefix}btn-light-info {
  background: css-var('accent-info-light', $so-info-light);
  color: css-var('accent-info');
  border-color: transparent;

  &:hover:not(:disabled) {
    background: css-var('accent-info');
    color: $so-white;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-info, 0.2);
  }
}

// ============================================
// DARK BUTTONS
// ============================================

// Dark Button
.#{$so-prefix}btn-dark {
  background: $so-grey-900;
  color: $so-white;
  border-color: $so-grey-900;

  &:hover:not(:disabled) {
    background: $so-grey-800;
    border-color: $so-grey-800;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-grey-900, 0.2);
  }
}

// Light Button (White/Light Gray)
.#{$so-prefix}btn-light {
  background: $so-grey-100;
  color: $so-grey-800;
  border-color: $so-grey-200;

  &:hover:not(:disabled) {
    background: $so-grey-200;
    border-color: $so-grey-300;
  }

  &:focus {
    box-shadow: 0 0 0 3px alpha($so-grey-400, 0.2);
  }
}

// ============================================
// CIRCULAR BUTTON
// ============================================

.#{$so-prefix}btn-circle {
  border-radius: radius('full');

  &.#{$so-prefix}btn-icon {
    border-radius: radius('full');
  }
}

// ============================================
// BLOCK BUTTON (Full Width)
// ============================================

.#{$so-prefix}btn-block {
  display: flex;
  width: 100%;
}

// ============================================
// BUTTON GROUP - HORIZONTAL
// ============================================

.#{$so-prefix}btn-group {
  display: inline-flex;

  .#{$so-prefix}btn {
    border-radius: 0;

    &:first-child {
      border-radius: radius('base') 0 0 radius('base');
    }

    &:last-child {
      border-radius: 0 radius('base') radius('base') 0;
    }

    &:not(:first-child) {
      margin-left: -1px;
    }

    &:only-child {
      border-radius: radius('base');
    }

    &.active {
      background: css-var('dropdown-item-active');
      color: css-var('dropdown-item-active-text');
      border-color: css-var('dropdown-item-active-text');
      z-index: 1;
    }
  }
}

// ============================================
// BUTTON GROUP - VERTICAL
// ============================================

.#{$so-prefix}btn-group-vertical {
  display: inline-flex;
  flex-direction: column;

  .#{$so-prefix}btn {
    border-radius: 0;

    &:first-child {
      border-radius: radius('base') radius('base') 0 0;
    }

    &:last-child {
      border-radius: 0 0 radius('base') radius('base');
    }

    &:not(:first-child) {
      margin-top: -1px;
    }

    &:only-child {
      border-radius: radius('base');
    }

    &.active {
      background: css-var('dropdown-item-active');
      color: css-var('dropdown-item-active-text');
      border-color: css-var('dropdown-item-active-text');
      z-index: 1;
    }
  }
}

// ============================================
// BUTTON LOADING STATE
// ============================================

.#{$so-prefix}btn.loading {
  position: relative;
  color: transparent !important;
  pointer-events: none;

  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 16px;
    height: 16px;
    margin: -8px 0 0 -8px;
    border: 2px solid $so-white;
    border-right-color: transparent;
    border-radius: 50%;
    animation: so-btn-spin 0.6s linear infinite;
  }

  // For outline/ghost/light buttons, use dark spinner
  &.#{$so-prefix}btn-outline,
  &.#{$so-prefix}btn-ghost,
  &.#{$so-prefix}btn-link,
  &[class*="btn-outline-"],
  &[class*="btn-light-"] {
    &::before {
      border-color: css-var('text-secondary');
      border-right-color: transparent;
    }
  }
}

@keyframes so-btn-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// ============================================
// PROGRESS BUTTON
// ============================================

.#{$so-prefix}btn-progress {
  position: relative;

  // Progress bar element (inner div)
  .btn-progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: var(--progress, 0%);
    background: rgba(255, 255, 255, 0.3);
    transition: width 0.3s ease;
    z-index: 0;
    pointer-events: none;
  }

  // Text content wrapper - ensure it's above the progress bar
  .btn-text {
    position: relative;
    z-index: 1;
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  // Done state content
  .btn-done {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    opacity: 0;
    transform: scale(0);
    z-index: 1;
    transition: opacity 0.3s ease 0.1s, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.1s;

    .material-icons {
      font-size: 20px;
      line-height: 1;
    }
  }

  // Completed state
  &.completed {
    transition: background-color 0.3s ease, border-color 0.3s ease;

    .btn-progress-bar {
      width: 100%;
    }

    .btn-text {
      opacity: 0;
      transform: scale(0.8);
    }

    .btn-done {
      opacity: 1;
      transform: scale(1);
    }
  }

  // Outline button progress - darker overlay
  &.#{$so-prefix}btn-outline,
  &[class*="btn-outline-"] {
    .btn-progress-bar {
      background: currentColor;
      opacity: 0.15;
    }

    &.completed .btn-progress-bar {
      opacity: 0.2;
    }
  }

  // Ghost button progress
  &.#{$so-prefix}btn-ghost,
  &[class*="btn-light-"] {
    .btn-progress-bar {
      background: currentColor;
      opacity: 0.1;
    }

    &.completed .btn-progress-bar {
      opacity: 0.15;
    }
  }
}

// Progress button with contextual success state
.#{$so-prefix}btn-progress.completed {
  // Primary -> Success transition
  &.#{$so-prefix}btn-primary {
    background: css-var('accent-success');
    border-color: css-var('accent-success');
  }

  // Secondary -> Success transition
  &.#{$so-prefix}btn-secondary {
    background: css-var('accent-success');
    border-color: css-var('accent-success');
  }

  // Outline variants -> filled success
  &.#{$so-prefix}btn-outline-primary,
  &.#{$so-prefix}btn-outline {
    background: css-var('accent-success');
    border-color: css-var('accent-success');
    color: $so-white;
  }

  // Light variants -> success light
  &.#{$so-prefix}btn-light-primary {
    background: css-var('accent-success-light', $so-success-light);
    color: css-var('accent-success');
  }

  // Danger variant stays danger (for cancel/stop actions)
  &.#{$so-prefix}btn-danger {
    background: css-var('accent-danger');
    border-color: css-var('accent-danger');
  }
}
